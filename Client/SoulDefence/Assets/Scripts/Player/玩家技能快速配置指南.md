# 玩家技能快速配置指南

## 在Unity编辑器中配置玩家技能

### 步骤1：找到玩家实体

1. 在Hierarchy窗口中找到玩家GameObject（通常在场景中标记为"Player"）
2. 确保该GameObject上挂载了`GameEntity`组件

### 步骤2：配置技能列表

在Inspector窗口中，找到`GameEntity`组件的技能配置部分：

#### 配置普通攻击（Default Skill）
- 将`Assets/Config/Skill/PlayerBasicAttack.asset`拖拽到`Default Skill`字段

#### 配置技能列表（Skills数组）
设置Skills数组大小为3，然后依次配置：

1. **Skills[0]** - 小招（F键）
   - 拖拽`Assets/Config/Skill/PlayerSkill_SmallUlt.asset`

2. **Skills[1]** - 大招（V键）
   - 拖拽`Assets/Config/Skill/PlayerSkill_Ultimate.asset`

3. **Skills[2]** - 滑行（Space键）
   - 拖拽`Assets/Config/Skill/PlayerSkill_Dash.asset`

### 步骤3：配置控制器

确保玩家GameObject上有`PlayerController`组件：
- 将玩家的GameEntity组件引用拖拽到`PlayerController`的`playerEntity`字段
- 设置`groundLayer`为地面层（用于鼠标点击检测）

### 步骤4：测试技能

运行游戏后，使用以下按键测试技能：

| 按键 | 技能 | 说明 |
|------|------|------|
| 鼠标左键 | 普通攻击 | 前方90度扇形群攻 |
| F键 | 小招 | 周围范围伤害（40%攻击力+10%生命值） |
| V键 | 大招 | 自我增强Buff（+攻击+防御+吸血） |
| Space键 | 滑行 | 向前冲刺5单位 |

## 技能配置文件位置

所有技能配置文件都在`Assets/Config/Skill/`目录下：

- `PlayerBasicAttack.asset` - 普通攻击
- `PlayerSkill_SmallUlt.asset` - 小招
- `PlayerSkill_Ultimate.asset` - 大招
- `PlayerSkill_Dash.asset` - 滑行技能

大招的Buff配置在`Assets/Config/Effect/`目录下：
- `PlayerUltimateBuff.asset` - 战斗狂热Buff

## 调整技能参数

### 普通攻击参数调整
打开`PlayerBasicAttack.asset`可以调整：
- `cooldown`: 攻击间隔
- `rangeSize`: 扇形角度
- `targetCount`: 最大目标数
- `attackPowerRatio`: 攻击力系数

**被动技能参数**（在同一文件中）：
- `healthThreshold`: 触发生命值阈值（默认20%）
- `attackCountThreshold`: 攻击次数阈值（默认3次）
- `damageMultiplier`: 伤害倍率（默认1.5倍）
- `healFromAttackPowerRatio`: 攻击力回血比例（默认2%）

### 小招参数调整
打开`PlayerSkill_SmallUlt.asset`可以调整：
- `cooldown`: 冷却时间
- `rangeSize`: 影响半径
- `attackPowerRatio`: 攻击力伤害系数（默认0.4 = 40%）
- `selfHealthRatio`: 自身生命值伤害系数（默认0.1 = 10%）

### 大招参数调整
打开`PlayerSkill_Ultimate.asset`可以调整：
- `cooldown`: 冷却时间

打开`PlayerUltimateBuff.asset`可以调整Buff效果：
- `duration`: 持续时间（默认10秒）
- `attributeValue`: 主属性加成（攻击力，默认+20）
- `secondaryAttributeValue`: 第二属性加成（防御力，默认+15）
- `lifeStealRatio`: 吸血比例（默认0.2 = 20%）

### 滑行技能参数调整
打开`PlayerSkill_Dash.asset`可以调整：
- `cooldown`: 冷却时间
- `movementDistance`: 移动距离
- `movementDuration`: 移动时间（影响移动速度）

## 常见问题

### Q: 技能无法释放？
A: 检查以下内容：
1. 确认技能配置文件已正确拖拽到GameEntity组件
2. 检查技能是否在冷却中
3. 确认SkillSystem已经在场景中初始化

### Q: 普通攻击没有范围伤害？
A: 检查：
1. 敌人是否在前方90度扇形范围内
2. 敌人是否有Collider组件
3. 敌人的TeamSystem设置是否与玩家敌对

### Q: 被动技能不触发？
A: 检查：
1. 玩家生命值是否低于20%
2. 是否已经进行了3次普通攻击
3. PassiveSkillSystem是否已正确初始化

### Q: 大招Buff没有吸血效果？
A: 检查：
1. PlayerUltimateBuff的effectType是否设置为MultiAttributeModifier (70)
2. lifeStealRatio是否设置为0.2
3. 攻击是否真正造成了伤害（吸血基于实际伤害）

### Q: 滑行技能没有反应？
A: 检查：
1. 技能是否配置到Skills[2]
2. Space键是否被其他系统占用
3. 玩家是否有足够的移动空间

## 进阶配置

### 自定义技能效果

如果你想创建新的技能，可以：
1. 右键点击`Assets/Config/Skill/`目录
2. 选择`Create > GameConfig > Skill`
3. 配置技能参数
4. 将新技能添加到玩家的技能列表

### 自定义Buff效果

如果你想创建新的Buff，可以：
1. 右键点击`Assets/Config/Effect/`目录
2. 选择`Create > GameConfig > Buff`
3. 配置Buff参数
4. 在技能配置中引用该Buff（buffToSelf或buffToTarget字段）

## 性能优化建议

1. **扇形检测**: 如果场景中敌人数量很多，可以考虑使用分层检测
2. **范围伤害**: 小招的targetCount可以根据性能需求调整
3. **被动技能**: 被动技能的检测在每次攻击时触发，性能开销较小
4. **Buff系统**: 大量Buff可能影响性能，建议控制同时存在的Buff数量

## 下一步

- 根据游戏平衡性调整技能数值
- 添加技能特效和音效
- 为技能添加UI提示（冷却时间、范围指示器等）
- 实现技能升级系统
- 添加更多职业的技能变体

