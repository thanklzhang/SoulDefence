# 新增模块：反馈系统

## 为什么重要

**爽感 = 打击反馈**

快节奏游戏必须有即时、清晰、爽快的反馈，让玩家感受到每一次行为的效果。

参考游戏：吸血鬼幸存者、Brotato、无双系列

---

## 1. 伤害反馈

### 1.1 伤害数字飘字

**普通伤害**
- 颜色：白色
- 字号：中等
- 动画：向上飘动+淡出
- 示例："25"

**暴击伤害**
- 颜色：黄色/橙色
- 字号：大号
- 动画：向上飘动+放大+淡出
- 特效：震动+闪光
- 示例："50!" 或 "CRIT 50!"

**连击伤害**
- 显示连击数
- 颜色：红色
- 示例："x10 COMBO"

### 1.2 打击音效

**普通攻击**
- 音效：清脆的打击声
- 音量：中等
- 音调：随机微调（避免重复感）

**暴击攻击**
- 音效：更重的打击声+特殊音效
- 音量：更大
- 音调：更低沉

**击杀**
- 音效：清脆的击杀确认音
- 音量：明显
- 让玩家清楚知道敌人已死

### 1.3 打击特效

**命中特效**
- 位置：敌人受击点
- 效果：光效+粒子
- 颜色：根据攻击类型（物理/魔法）

**暴击特效**
- 更夸张的光效
- 粒子爆炸效果
- 屏幕闪白（轻微）

**受击反馈**
- 敌人闪白（0.1秒）
- 敌人被击退（轻微位移）
- 受击动画播放

---

## 2. 击杀反馈

### 2.1 击杀音效
- **普通小怪**：轻快的击杀音
- **精英怪物**：更响亮的击杀音+特殊音效
- **Boss**：震撼的击杀音+音乐高潮

### 2.2 死亡特效
- **普通小怪**：简单消失特效
- **精英怪物**：爆炸光效+粒子
- **Boss**：大型爆炸+屏幕震动+全屏光效

### 2.3 连击系统

**连击计数**
- 快速击杀累积连击数
- 显示位置：屏幕右上角
- 显示内容："10 COMBO"
- 连击越高，字体越大，颜色越红

**连击断裂**
- 5秒未击杀，连击归0
- 连击断裂音效

**连击奖励**（可选）
- 连击达到10/20/50时给予小奖励
- 金币掉落增加
- 攻击力临时提升

### 2.4 屏幕震动

**触发条件**
- 击杀精英怪物：轻微震动
- 击杀Boss：强烈震动
- 城堡受到重击：震动
- 大招释放：震动

**震动强度**
- 轻微：0.1秒，幅度小
- 中等：0.2秒，幅度中
- 强烈：0.5秒，幅度大

---

## 3. 获得奖励反馈

### 3.1 金币掉落

**掉落表现**
- 金币图标从敌人位置掉落
- 金币闪烁发光
- 金币自动吸附到玩家（5米内）

**拾取反馈**
- 拾取音效（清脆）
- 飘字显示："+10金币"
- 屏幕右上角金币数量跳动

### 3.2 宝箱掉落

**掉落特效**
- 宝箱从天而降（带光柱）
- 落地时光效+音效
- 宝箱闪烁提示玩家

**打开宝箱**
- 打开动画
- 打开音效（期待感）
- 3个奖励选项展开

**选择奖励**
- 鼠标悬停：选项高亮+描述
- 点击确认：光效+音效
- 获得反馈：飘字提示效果

### 3.3 升级反馈

**装备升级**
- 全屏光效（从下往上扫过）
- 升级音效（激昂）
- 装备外观颜色变化
- 飘字显示："武器升级！攻击力+10"

**属性提升**
- 角色发光
- 属性提升音效
- 飘字显示属性变化

**技能升级**
- 技能图标闪光
- 技能升级音效
- 提示："技能等级提升！"

---

## 4. 战斗节奏反馈

### 4.1 玩家状态提示

**生命值低**
- 生命值<30%：屏幕边缘发红
- 生命值<10%：屏幕边缘快速闪烁+心跳音效
- 提示文字："危险！生命值过低！"

**生命恢复**
- 使用血瓶：绿色光效+恢复音效
- 飘字显示："+150生命值"
- 血条快速填充动画

**获得Buff**
- Buff图标出现在角色头顶
- Buff音效
- 屏幕特效（攻击力提升：红色光晕）

### 4.2 波次反馈

**波次开始**
- 提示文字："第3波 来袭！"
- 警告音效
- 怪物出现光柱

**波次结束**
- 提示文字："第3波 击退！"
- 胜利音效
- 短暂停顿（2秒）

**Boss登场**
- 全屏警告："Boss出现！"
- Boss登场音乐
- 屏幕震动
- Boss血条出现在顶部

### 4.3 城堡状态反馈

**城堡受击**
- 城堡闪红光
- 受击音效
- 血条抖动

**城堡危险**
- 城堡生命值<30%：屏幕震动+警报音效
- 红色警告文字："城堡危险！"
- 警报循环播放

---

## 5. 游戏结果反馈

### 5.1 胜利反馈

**触发条件**
- 击败最后一波+Boss

**表现效果**
- 胜利音乐响起
- 全屏金色光效
- 文字："胜利！"
- 烟花特效
- 统计界面：击杀数、金币、存活时间

### 5.2 失败反馈

**触发条件**
- 城堡生命值归0

**表现效果**
- 城堡爆炸
- 屏幕震动+闪白
- 失败音效
- 文字："城堡被摧毁！"
- 统计界面：存活时间、击杀数

---

## 6. UI反馈

### 6.1 按钮反馈
- 鼠标悬停：高亮+音效
- 点击：按下动画+音效
- 确认：确认音效

### 6.2 技能冷却
- 技能图标变暗
- 冷却进度条
- 冷却完成：图标闪烁+音效提示

### 6.3 金币不足
- 选项变灰
- 点击时：错误音效
- 提示："金币不足"

---

## 7. 音效设计原则

### 7.1 音效分层
- **UI音效**：按钮点击、界面打开（音量小）
- **战斗音效**：打击、击杀、技能（音量中）
- **重要音效**：升级、Boss、警告（音量大）

### 7.2 音效差异化
- 不同敌人受击音效不同
- 不同武器攻击音效不同
- 暴击和普通攻击音效区分明显

### 7.3 音效避免重复
- 同类音效准备3-5个变体
- 随机播放
- 音调随机微调

---

## 8. 特效设计原则

### 8.1 性能优先
- 大量敌人时简化特效
- 使用对象池复用特效
- 控制粒子数量

### 8.2 清晰易读
- 特效不遮挡游戏视野
- 重要信息突出显示
- 敌我特效颜色区分（敌人红，玩家蓝/绿）

### 8.3 夸张表现
- 快节奏游戏需要夸张反馈
- 暴击特效要明显
- 击杀瞬间要爽快

---

## 9. 技术实现要点

### 9.1 飘字系统
- 使用对象池管理飘字
- 支持不同类型的飘字（伤害、治疗、金币、提示）
- 可配置颜色、大小、动画

### 9.2 音效管理
- 音效分组（UI、战斗、环境）
- 音量控制
- 音效优先级（重要音效打断普通音效）

### 9.3 特效管理
- 使用对象池
- 特效自动回收
- 分级渲染（近处详细，远处简化）

### 9.4 屏幕震动
- 震动强度可配置
- 可以关闭（设置选项）
- 避免过度使用

---

## 10. 参考标准

### 10.1 吸血鬼幸存者
- 清晰的伤害数字
- 明显的击杀反馈
- 升级时的满足感

### 10.2 Brotato
- 可爱的音效
- 夸张的伤害数字
- 清晰的角色状态

### 10.3 无双系列
- 连击系统
- 夸张的打击感
- 大量敌人击杀的爽快感

