# 新增模块：Buff系统

## 概述

Buff系统提供临时增益效果，通过奖励系统或商店获得。设计简洁，效果明确，避免复杂的Buff组合和计算。

---

## 1. Buff分类

### 1.1 攻击类Buff

**攻击力提升**
- 效果：攻击力 +50%
- 持续时间：30秒
- 视觉：角色武器发红光

**攻击速度提升**
- 效果：攻击速度 +40%
- 持续时间：30秒
- 视觉：角色周围黄色光环

**暴击率提升**
- 效果：暴击率 +30%
- 持续时间：20秒
- 视觉：角色武器闪电特效

**全能战斗**
- 效果：攻击力+30%，攻击速度+30%
- 持续时间：20秒
- 视觉：角色全身发红光

---

### 1.2 移动类Buff

**移动速度提升**
- 效果：移动速度 +50%
- 持续时间：30秒
- 视觉：角色脚下风旋特效

**疾跑**
- 效果：移动速度 +100%
- 持续时间：10秒
- 视觉：角色拖尾残影

---

### 1.3 防御类Buff

**护盾**
- 效果：吸收200点伤害
- 持续时间：直到护盾被打破
- 视觉：角色周围蓝色护盾罩

**伤害减免**
- 效果：受到伤害减少50%
- 持续时间：20秒
- 视觉：角色身体半透明

**生命恢复**
- 效果：每秒恢复5%最大生命值
- 持续时间：10秒
- 视觉：角色周围绿色光粒子

---

### 1.4 特殊状态Buff

**无敌**
- 效果：免疫所有伤害
- 持续时间：5秒
- 视觉：角色金色闪光
- 备注：极为稀有

**狂暴**
- 效果：攻击力+100%，攻击速度+50%，移动速度+50%
- 持续时间：15秒
- 视觉：角色全身红光+闪电
- 备注：强力Buff

**时间缓慢**
- 效果：敌人移动速度-50%
- 持续时间：10秒
- 视觉：屏幕泛蓝，敌人拖尾

---

### 1.5 经济类Buff

**金币加成**
- 效果：金币掉落 +100%
- 持续时间：60秒
- 视觉：角色周围金币图标环绕

**经验加成**（如果有经验系统）
- 效果：经验获得 +50%
- 持续时间：60秒
- 视觉：角色周围蓝色光点

---

## 2. Buff获取方式

### 2.1 奖励系统
击杀怪物掉落宝箱，3选1时可能出现：
- "攻击狂暴"：30秒内攻击力+50%
- "疾风"：30秒内移动速度+50%
- "护盾"：吸收200点伤害

### 2.2 商店系统（未来可选）
强化站购买临时Buff：
- 价格：50金币
- 立即生效

### 2.3 特殊触发（未来可选）
- 连击达到50：自动获得"狂暴"Buff
- 生命值低于10%：自动获得"护盾"Buff（冷却5分钟）

---

## 3. Buff规则

### 3.1 叠加规则

**同类型Buff**
- 不叠加，取最强效果
- 持续时间刷新
- 示例：拥有"攻击力+50%"时再获得"攻击力+30%"，保持50%，时间刷新

**不同类型Buff**
- 可同时生效
- 各自独立计时
- 示例：同时拥有"攻击力+50%"和"移动速度+50%"

**特殊Buff**
- "无敌"和"狂暴"不与其他Buff共存
- 获得时清除其他Buff

### 3.2 持续时间
- 所有Buff有固定持续时间
- 时间到自动消失
- UI显示剩余时间

### 3.3 效果计算

**加法叠加**
- 攻击力+50% = 基础攻击力 × 1.5
- 移动速度+100% = 基础移动速度 × 2.0

**不进行乘法叠加**
- 避免复杂计算
- 数值明确易懂

---

## 4. UI显示

### 4.1 Buff图标
- **位置**：屏幕右上角（金币下方）
- **显示内容**：
  - Buff图标
  - Buff名称（鼠标悬停显示）
  - 剩余时间（倒计时）

### 4.2 Buff数量
- 最多同时显示5个Buff
- 超过5个时只显示最重要的5个

### 4.3 Buff提示
- 获得Buff时：图标飞入+音效
- Buff即将结束（剩余3秒）：图标闪烁
- Buff结束：图标消失+淡出音效

---

## 5. 视觉反馈

### 5.1 角色特效
每个Buff有独特的角色特效：
- 攻击力：红光
- 防御力：蓝光
- 速度：黄光+风旋
- 无敌：金光闪烁

### 5.2 环境特效
特殊Buff影响环境：
- 时间缓慢：画面泛蓝，敌人慢动作
- 狂暴：画面泛红，屏幕边缘震动

---

## 6. 平衡设计

### 6.1 Buff强度分级

**普通Buff**
- 单项属性提升30-50%
- 持续时间30秒
- 获得概率：高

**稀有Buff**
- 多项属性提升或单项提升100%
- 持续时间15-20秒
- 获得概率：中

**传说Buff**
- 无敌、狂暴等特殊效果
- 持续时间5-10秒
- 获得概率：极低

### 6.2 Buff出现概率
- 普通Buff：60%
- 稀有Buff：30%
- 传说Buff：10%

---

## 7. Buff配置示例

```
Buff ID: 1001
名称: 力量狂潮
类型: 攻击类
效果: 攻击力 +50%
持续时间: 30秒
视觉特效: 角色武器红光
音效: 力量提升音效
稀有度: 普通
```

```
Buff ID: 2001
名称: 狂暴
类型: 特殊
效果: 攻击力+100%, 攻击速度+50%, 移动速度+50%
持续时间: 15秒
视觉特效: 角色全身红光+闪电
音效: 狂暴音效
稀有度: 传说
```

---

## 8. Buff系统与其他系统的关系

### 8.1 与奖励系统
- 奖励系统提供Buff选项
- Buff是3选1的选项之一

### 8.2 与商店系统
- 商店可售卖临时Buff（可选）
- 价格低于永久升级

### 8.3 与战斗系统
- Buff影响战斗属性
- 战斗系统读取Buff效果

---

## 9. 技术实现要点

### 9.1 Buff管理器
- 管理所有激活的Buff
- 计算Buff叠加效果
- 更新Buff剩余时间

### 9.2 Buff数据
- 使用ScriptableObject配置Buff
- 策划可视化编辑

### 9.3 Buff特效
- 每个Buff绑定特效预制体
- 自动播放和销毁

---

## 10. Buff列表总结

| Buff名称 | 类型 | 效果 | 持续时间 | 稀有度 |
|---------|------|------|----------|--------|
| 力量狂潮 | 攻击 | 攻击力+50% | 30秒 | 普通 |
| 迅捷打击 | 攻击 | 攻击速度+40% | 30秒 | 普通 |
| 暴击之星 | 攻击 | 暴击率+30% | 20秒 | 普通 |
| 疾风 | 移动 | 移动速度+50% | 30秒 | 普通 |
| 护盾 | 防御 | 吸收200伤害 | 无限 | 普通 |
| 伤害减免 | 防御 | 减伤50% | 20秒 | 普通 |
| 生命恢复 | 防御 | 每秒恢复5%生命 | 10秒 | 普通 |
| 金币加成 | 经济 | 金币掉落+100% | 60秒 | 普通 |
| 全能战斗 | 攻击 | 攻击力+30%，攻速+30% | 20秒 | 稀有 |
| 疾跑 | 移动 | 移动速度+100% | 10秒 | 稀有 |
| 时间缓慢 | 特殊 | 敌人减速50% | 10秒 | 稀有 |
| 狂暴 | 特殊 | 攻击+100%，攻速+50%，速度+50% | 15秒 | 传说 |
| 无敌 | 特殊 | 免疫所有伤害 | 5秒 | 传说 |

---

## 11. 设计原则

### 11.1 简单直接
- 效果明确，一目了然
- 不需要复杂计算
- 玩家容易理解

### 11.2 视觉清晰
- 每个Buff有独特视觉
- 容易区分不同Buff
- 不遮挡游戏视野

### 11.3 平衡性
- 强力Buff持续时间短
- 普通Buff持续时间长
- 稀有度控制获得概率

